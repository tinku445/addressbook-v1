pipeline {
    agent none
          stages {
        stage('compile') { //prod
        agent any
            steps {
                echo 'compiling the source code'
                sh 'mvn compile'
            }
         } 
         stage('Test') { //test
         agent any
            steps {
                echo 'Testing the code'
                sh 'mvn test'
            }
            post {
            always {
                junit 'target/surefire-reports/*.xml'
            }
         }
         }
         
         stage('Package') { //dev
         agent {label 'linux-slave'}
            steps {
                echo 'Running the tests'
                sh 'mvn package'
            }
         }
    }
}
